# Ctrl.S21 任务接口文档

## 概述

Ctrl.S21 是 Ctrl 中的一个任务，用于执行S21腔频测量实验，测量指定量子比特在频率范围内的S21响应。

## 接口使用方式

### 客户端初始化

```python
from qubitclient.ctrl import QubitCtrlClient, CtrlTaskName

client = QubitCtrlClient()
```

### 请求参数

| 参数名 | 类型 | 必需 | 描述 |
|--------|------|------|------|
| task_type | CtrlTaskName | 是 | 任务类型，固定为`CtrlTaskName.S21` |
| qubits_use | list[str] | 是 | 要测量的量子比特列表，例如["Q0", "Q1"] |
| frequency_start | float | 否 | 频率扫描起始点，默认值-40e6 Hz |
| frequency_end | float | 否 | 频率扫描结束点，默认值40e6 Hz |
| frequency_sample_num | int | 否 | 频率采样点数，默认值101 |

### 调用示例

```python
# 执行S21腔频测量实验
result = client.run(
    task_type=CtrlTaskName.S21,
    qubits_use=["Q0", "Q1"],
    frequency_start=-40e6,
    frequency_end=40e6,
    frequency_sample_num=101
)

print(result)
```

## 返回值格式

返回的结果包含测量数据和相关参数：

```json
{
  "data": {
    "Q0": {
      "frequency": [float, ...],
      "s21_real": [float, ...],
      "s21_imag": [float, ...]
    },
    "Q1": {
      "frequency": [float, ...],
      "s21_real": [float, ...],
      "s21_imag": [float, ...]
    }
  },
  "parameters": {
    "frequency_start": -40000000.0,
    "frequency_end": 40000000.0,
    "frequency_sample_num": 101
  }
}
```

### 字段说明

| 字段名 | 类型 | 描述 |
|--------|------|------|
| data | dict | 包含每个量子比特的测量数据 |
| frequency | List[float] | 频率扫描点 |
| s21_real | List[float] | S21响应的实部 |
| s21_imag | List[float] | S21响应的虚部 |
| parameters | dict | 实验参数信息 |

## 应用场景

S21腔频测量实验主要用于：
- 确定量子比特的共振频率
- 测量谐振腔的品质因子
- 表征量子比特与谐振腔的耦合强度